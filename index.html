<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>在线 OCR 文字识别</title>

  <style>
    body { font-family: Arial, sans-serif; background: #f8f8f8; margin: 0; padding: 0; }
    header { background: #4a90e2; color: white; padding: 1rem; text-align: center; }
    main { padding: 1rem; max-width: 700px; margin: 0 auto; }
    .box { background: white; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    #result { white-space: pre-wrap; margin-top: 1rem; }
    button { background-color: #4a90e2; color: white; padding: 0.6rem 1.2rem; border: none; border-radius: 4px; cursor: pointer; }
    button:disabled { background: #999; cursor: not-allowed; }
  </style>

  <!-- CDN 引入 Tesseract.js OCR 引擎 -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
</head>
<body>

<header>
  <h1>在线 OCR 图片文字识别</h1>
  <p>上传图片 → 自动识别文字 → 显示结果</p>
</header>

<main>
  <div class="box">
    <label for="imageUpload">选择图片文件（JPG/PNG）:</label><br>
    <input type="file" id="imageUpload" accept="image/*">
    <button id="startBtn" disabled>开始识别</button>
  </div>

  <div class="box">
    <h3>识别结果</h3>
    <div id="result">请上传图片后点击“开始识别”</div>
  </div>

  <div class="box">
    <h3>使用说明</h3>
    <ul>
      <li>支持中英文等多语言识别</li>
      <li>识别过程在本地浏览器完成，没有上传服务器</li>
      <li>识别速度取决于图片大小和浏览器性能</li>
    </ul>
  </div>
</main>

<script>
const uploadInput = document.getElementById('imageUpload');
const startBtn = document.getElementById('startBtn');
const resultBox = document.getElementById('result');

uploadInput.addEventListener('change', () => {
  startBtn.disabled = !uploadInput.files.length;
});

startBtn.addEventListener('click', () => {
  const file = uploadInput.files[0];
  if (!file) return;

  resultBox.textContent = '识别中，请稍候…';

  // 使用 Tesseract.js 进行 OCR 识别
  Tesseract.recognize(
    URL.createObjectURL(file),
    'eng+chi_sim', // 英文 + 简体中文
    { logger: m => console.log(m) }
  ).then(({ data: { text } }) => {
    resultBox.textContent = text || '未识别到文字';
  }).catch(err => {
    resultBox.textContent = '识别失败: ' + err;
  });
});
</script>

</body>
</html>
